<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿßŸÑŸÖÿØÿ±ÿ® ÿßŸÑÿ∞ŸÉŸä - ÿ≠ŸÖÿ≤ÿ© ÿßŸÑŸàÿ≠ÿØÿßŸÜŸä</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            transition: all 0.3s ease;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        .header h1 {
            color: #667eea;
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        .trainer-profile {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid #667eea;
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            text-align: right;
            font-size: 0.95rem;
        }
        .trainer-profile h3 {
            color: #667eea;
            margin-bottom: 5px;
        }
        .trainer-profile p {
            color: #555;
            line-height: 1.6;
        }
        .lang-switch {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.3);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            backdrop-filter: blur(5px);
            font-size: 14px;
        }
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            .chat-container {
                grid-column: span 1 !important;
            }
        }
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        .chat-container {
            grid-column: span 2;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
        }
        .chat-messages {
            height: 400px;
            overflow-y: auto;
            border: 2px solid #e1e5e9;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            background: rgba(248, 249, 250, 0.8);
        }
        .message {
            margin-bottom: 15px;
            padding: 15px 20px;
            border-radius: 15px;
            max-width: 80%;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .user-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-left: auto;
            text-align: right;
        }
        .bot-message {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            margin-right: auto;
        }
        .chat-input-container {
            display: flex;
            gap: 10px;
        }
        .chat-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s ease;
        }
        .chat-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .send-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .stat-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid rgba(102, 126, 234, 0.2);
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-3px);
            border-color: rgba(102, 126, 234, 0.4);
        }
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }
        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }
        .progress-bar {
            background: rgba(230, 230, 230, 0.5);
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 15px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 5px;
            transition: width 0.8s ease;
        }
        .icon {
            font-size: 1.5rem;
            margin-left: 10px;
        }
        .workout-plan {
            background: rgba(248, 249, 250, 0.8);
            border-radius: 15px;
            padding: 20px;
            margin-top: 15px;
            border: 1px solid #e1e5e9;
        }
        .exercise-item {
            padding: 10px;
            border-left: 4px solid #667eea;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 0 10px 10px 0;
        }
        .loading {
            display: none;
            text-align: center;
            color: #667eea;
            font-weight: 600;
        }
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(102, 126, 234, 0.3);
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .body-projection {
            margin-top: 20px;
            text-align: center;
        }
        .chart-container {
            height: 300px;
            margin: 20px 0;
        }
        .pdf-export {
            margin-top: 20px;
            text-align: center;
        }
        .btn-pdf {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <button class="lang-switch" id="langSwitch">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© / Fran√ßais</button>
    <div class="container">
        <!-- ÿßŸÑÿ±ÿ£ÿ≥ -->
        <div class="header">
            <h1 id="title">üèãÔ∏è ÿßŸÑŸÖÿØÿ±ÿ® ÿßŸÑÿ∞ŸÉŸä - ÿ≠ŸÖÿ≤ÿ© ÿßŸÑŸàÿ≠ÿØÿßŸÜŸä</h1>
            <p id="subtitle">ŸÖŸÜÿµÿ© ÿ∞ŸÉŸäÿ© ŸÖÿ™ŸÉÿßŸÖŸÑÿ© ŸÑŸÑÿµÿ≠ÿ©ÿå ÿßŸÑŸÑŸäÿßŸÇÿ©ÿå ŸàÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ© ÿßŸÑÿ±Ÿäÿßÿ∂Ÿäÿ©</p>

            <div class="trainer-profile">
                <h3>üë§ ÿ®ŸÇŸÑŸÖ: ÿ≠ŸÖÿ≤ÿ© ÿßŸÑŸàÿ≠ÿØÿßŸÜŸä</h3>
                <p id="trainer-desc">
                    <strong>ÿØŸÉÿ™Ÿàÿ± ŸÖŸáŸÜŸä ŸÅŸä ÿπŸÑŸÖ ÿßŸÑÿ™ŸÖÿ±ŸäŸÜ | ŸÖŸáŸÜÿØÿ≥ ÿ∞ŸÉÿßÿ° ÿßÿµÿ∑ŸÜÿßÿπŸä | ŸÖÿßÿ¨ÿ≥ÿ™Ÿäÿ± ŸÑŸäÿßŸÇÿ© Ÿàÿ™ÿ∫ÿ∞Ÿäÿ© ÿ±Ÿäÿßÿ∂Ÿäÿ©</strong><br>
                    ÿÆÿ®Ÿäÿ± ŸÅŸä ÿßŸÑÿ•ÿµÿßÿ®ÿßÿ™ ÿßŸÑÿ±Ÿäÿßÿ∂Ÿäÿ©ÿå ÿßŸÑÿØŸÅÿßÿπ ÿπŸÜ ÿßŸÑŸÜŸÅÿ≥ÿå ŸàÿπŸÑŸÖ ÿßŸÑÿ™ÿ¥ÿ±Ÿäÿ≠ (ŸÖÿπÿ™ŸÖÿØ ŸÖŸÜ ÿßŸÑŸÖÿ∫ÿ±ÿ®)<br>
                    ÿ¥ŸàÿßŸáÿØ ŸÅŸä ÿßŸÑÿ•ÿ≥ÿπÿßŸÅÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸäÿ©ÿå ÿßŸÑÿµÿ≠ÿ© ÿßŸÑÿπÿßŸÖÿ©ÿå ŸàŸÅŸÜŸàŸÜ ÿßŸÑŸÇÿ™ÿßŸÑ
                </p>
            </div>
        </div>

        <!-- ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä -->
        <div class="main-content">
            <!-- ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ -->
            <div class="card">
                <h2><span class="icon">üë§</span><span id="userDataTitle">ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ©</span></h2>
                <form id="user-form">
                    <div class="form-group">
                        <label for="name" id="nameLabel">ÿßŸÑÿßÿ≥ŸÖ</label>
                        <input type="text" id="name" name="name" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ" required>
                    </div>
                    <div class="form-group">
                        <label for="age" id="ageLabel">ÿßŸÑÿπŸÖÿ±</label>
                        <input type="number" id="age" name="age" min="16" max="80" placeholder="25" required>
                    </div>
                    <div class="form-group">
                        <label for="weight" id="weightLabel">ÿßŸÑŸàÿ≤ŸÜ (ŸÉÿ∫)</label>
                        <input type="number" id="weight" name="weight" step="0.1" placeholder="70.5" required>
                    </div>
                    <div class="form-group">
                        <label for="height" id="heightLabel">ÿßŸÑÿ∑ŸàŸÑ (ÿ≥ŸÖ)</label>
                        <input type="number" id="height" name="height" placeholder="170" required>
                    </div>
                    <div class="form-group">
                        <label for="bloodType" id="bloodTypeLabel">ŸÅÿµŸäŸÑÿ© ÿßŸÑÿØŸÖ</label>
                        <select id="bloodType" name="bloodType" required>
                            <option value="">ÿßÿÆÿ™ÿ± ŸÅÿµŸäŸÑÿ© ÿßŸÑÿØŸÖ</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="fitness-level" id="fitnessLevelLabel">ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑŸÑŸäÿßŸÇÿ©</label>
                        <select id="fitness-level" name="fitness-level" required>
                            <option value="">ÿßÿÆÿ™ÿ± ŸÖÿ≥ÿ™ŸàÿßŸÉ</option>
                            <option value="BEGINNER">ŸÖÿ®ÿ™ÿØÿ¶</option>
                            <option value="INTERMEDIATE">ŸÖÿ™Ÿàÿ≥ÿ∑</option>
                            <option value="ADVANCED">ŸÖÿ™ŸÇÿØŸÖ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sportInterest" id="sportInterestLabel">ÿßŸÑÿ±Ÿäÿßÿ∂ÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©</label>
                        <input type="text" id="sportInterest" name="sportInterest" placeholder="ŸÉÿ±ÿ© ÿßŸÑŸÇÿØŸÖÿå ŸÉÿßÿ±ÿßÿ™ŸäŸáÿå ÿ±ŸÉÿ∂...">
                    </div>
                    <div class="form-group">
                        <label for="martialArt" id="martialArtLabel">ŸÅŸÜŸàŸÜ ÿßŸÑŸÇÿ™ÿßŸÑ (ÿ•ŸÜ Ÿàÿ¨ÿØ)</label>
                        <input type="text" id="martialArt" name="martialArt" placeholder="ÿ¨ŸàÿØŸàÿå ŸÖŸÑÿßŸÉŸÖÿ©ÿå ÿ™ÿßŸäŸÉŸàŸÜÿØŸà...">
                    </div>
                    <div class="form-group">
                        <label for="injury" id="injuryLabel">ŸáŸÑ ŸÑÿØŸäŸÉ ÿ•ÿµÿßÿ®ÿ©ÿü</label>
                        <select id="injury" name="injury">
                            <option value="">ŸÑÿß ÿ¥Ÿäÿ°</option>
                            <option value="back">ÿ¢ŸÑÿßŸÖ ÿßŸÑÿ∏Ÿáÿ±</option>
                            <option value="knee">ÿ•ÿµÿßÿ®ÿ© ÿßŸÑÿ±ŸÉÿ®ÿ©</option>
                            <option value="shoulder">ÿ•ÿµÿßÿ®ÿ© ÿßŸÑŸÉÿ™ŸÅ</option>
                            <option value="asthma">ÿ±ÿ®Ÿà</option>
                            <option value="surgery">ÿπŸÖŸÑŸäÿ© ÿ¨ÿ±ÿßÿ≠Ÿäÿ© ÿ≥ÿßÿ®ŸÇÿ©</option>
                            <option value="other">ÿ£ÿÆÿ±Ÿâ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="absenceDays" id="absenceDaysLabel">ÿπÿØÿØ ÿ£ŸäÿßŸÖ ÿßŸÑÿ∫Ÿäÿßÿ® ÿßŸÑŸÖÿ™ŸàŸÇÿπÿ©</label>
                        <input type="number" id="absenceDays" name="absenceDays" min="0" max="365" placeholder="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="goals" id="goalsLabel">ÿ£ŸáÿØÿßŸÅŸÉ</label>
                        <textarea id="goals" name="goals" placeholder="ŸÖÿ´ÿßŸÑ: ŸÅŸÇÿØÿßŸÜ ÿßŸÑŸàÿ≤ŸÜÿå ÿ®ŸÜÿßÿ° ÿßŸÑÿπÿ∂ŸÑÿßÿ™ÿå ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÑŸäÿßŸÇÿ©" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn"><span id="saveBtn">ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ üíæ</span></button>
                </form>
            </div>

            <!-- ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ -->
            <div class="card">
                <h2><span class="icon">üìä</span><span id="statsTitle">ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ŸÉ</span></h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="bmi-value">--</div>
                        <div class="stat-label" id="bmiLabel">ŸÖÿ§ÿ¥ÿ± ŸÉÿ™ŸÑÿ© ÿßŸÑÿ¨ÿ≥ŸÖ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="workouts-count">0</div>
                        <div class="stat-label" id="workoutsLabel">ÿ™ŸÖÿßÿ±ŸäŸÜ ŸÖŸÉÿ™ŸÖŸÑÿ©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="calories-burned">0</div>
                        <div class="stat-label" id="caloriesLabel">ÿ≥ÿπÿ±ÿ© ŸÖÿ≠ÿ±ŸàŸÇÿ©</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="streak-days">0</div>
                        <div class="stat-label" id="streakLabel">ÿ£ŸäÿßŸÖ ŸÖÿ™ÿ™ÿßŸÑŸäÿ©</div>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <label style="color: #666; font-size: 0.9rem;" id="weeklyProgressLabel">ÿßŸÑÿ™ŸÇÿØŸÖ ÿßŸÑÿ£ÿ≥ÿ®ŸàÿπŸä</label>
                    <div class="progress-bar">
                        <div class="progress-fill" id="weekly-progress" style="width: 0%"></div>
                    </div>
                    <div style="text-align: center; margin-top: 5px; color: #666; font-size: 0.8rem;">
                        <span id="progress-text">0% ŸÖŸÜ ŸáÿØŸÅ ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ</span>
                    </div>
                </div>
                <button class="btn" onclick="generateWorkoutPlan()" style="margin-top: 20px;">
                    <span id="generatePlanBtn">ÿ•ŸÜÿ¥ÿßÿ° ÿÆÿ∑ÿ© ÿ™ŸÖÿ±ŸäŸÜ üéØ</span>
                </button>
                <div id="workout-plan-display" class="workout-plan" style="display: none;">
                    <!-- ÿ≥ÿ™ÿ∏Ÿáÿ± ÿÆÿ∑ÿ© ÿßŸÑÿ™ŸÖÿ±ŸäŸÜ ŸáŸÜÿß -->
                </div>
                <div id="body-projection" class="body-projection" style="display: none;">
                    <h3 id="bodyProjectionTitle">üìà ÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿ¨ÿ≥ŸÖŸÉ ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ©</h3>
                    <canvas id="bodyChart"></canvas>
                </div>
            </div>
        </div>

        <!-- ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ© -->
        <div class="chat-container">
            <h2><span class="icon">üí¨</span><span id="chatTitle">ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ© ŸÖÿπ ÿßŸÑŸÖÿØÿ±ÿ® ÿßŸÑÿ∞ŸÉŸä</span></h2>
            <div class="chat-messages" id="chat-messages">
                <div class="message bot-message">
                    <span id="welcomeMsg">ŸÖÿ±ÿ≠ÿ®ÿßŸã! ÿ£ŸÜÿß ŸÖÿØÿ±ÿ®ŸÉ ÿßŸÑÿ∞ŸÉŸäÿå ÿ®ÿØÿπŸÖ ŸÖŸÜ ÿÆÿ®ÿ±ÿ© <strong>ÿ≠ŸÖÿ≤ÿ© ÿßŸÑŸàÿ≠ÿØÿßŸÜŸä</strong> ŸÉÿÆÿ®Ÿäÿ± ŸÑŸäÿßŸÇÿ© Ÿàÿ™ÿ∫ÿ∞Ÿäÿ© ÿ±Ÿäÿßÿ∂Ÿäÿ©.<br>
                    ÿ£ÿÆÿ®ÿ±ŸÜŸä: ŸÖÿß ŸáÿØŸÅŸÉÿü ŸáŸÑ ŸÑÿØŸäŸÉ ÿ•ÿµÿßÿ®ÿ©ÿü ŸÖÿß ŸÜŸàÿπ ÿ±Ÿäÿßÿ∂ÿ™ŸÉÿü</span>
                </div>
            </div>
            <div class="loading" id="loading">
                <span id="thinkingText">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÅŸÉŸäÿ±</span><span class="spinner"></span>
            </div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chat-input" 
                       placeholder="ÿßÿ≥ÿ£ŸÑŸÜŸä: ŸÖÿßÿ∞ÿß Ÿäÿ≠ÿØÿ´ ÿ•ŸÜ ÿ™ŸàŸÇŸÅÿ™ ÿπŸÜ ÿßŸÑÿ™ŸÖÿ±ŸäŸÜ ŸÑŸÖÿØÿ© ÿ¥Ÿáÿ±ÿü">
                <button class="send-btn" onclick="sendMessage()"><span id="sendBtn">ÿ•ÿ±ÿ≥ÿßŸÑ üöÄ</span></button>
            </div>
            <div class="pdf-export">
                <button class="btn-pdf" onclick="exportPDF()"><span id="exportPdfBtn">ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ŸÉŸÄ PDF</span></button>
            </div>
        </div>
    </div>

    <script>
        // ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™ ÿßŸÑŸÉÿßŸÖŸÑÿ©
        const translations = {
            ar: {
                title: "ÿßŸÑŸÖÿØÿ±ÿ® ÿßŸÑÿ∞ŸÉŸä - ÿ≠ŸÖÿ≤ÿ© ÿßŸÑŸàÿ≠ÿØÿßŸÜŸä",
                subtitle: "ŸÖŸÜÿµÿ© ÿ∞ŸÉŸäÿ© ŸÖÿ™ŸÉÿßŸÖŸÑÿ© ŸÑŸÑÿµÿ≠ÿ©ÿå ÿßŸÑŸÑŸäÿßŸÇÿ©ÿå ŸàÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ© ÿßŸÑÿ±Ÿäÿßÿ∂Ÿäÿ©",
                trainerDesc: "ÿØŸÉÿ™Ÿàÿ± ŸÖŸáŸÜŸä ŸÅŸä ÿπŸÑŸÖ ÿßŸÑÿ™ŸÖÿ±ŸäŸÜ | ŸÖŸáŸÜÿØÿ≥ ÿ∞ŸÉÿßÿ° ÿßÿµÿ∑ŸÜÿßÿπŸä | ŸÖÿßÿ¨ÿ≥ÿ™Ÿäÿ± ŸÑŸäÿßŸÇÿ© Ÿàÿ™ÿ∫ÿ∞Ÿäÿ© ÿ±Ÿäÿßÿ∂Ÿäÿ©<br>ÿÆÿ®Ÿäÿ± ŸÅŸä ÿßŸÑÿ•ÿµÿßÿ®ÿßÿ™ ÿßŸÑÿ±Ÿäÿßÿ∂Ÿäÿ©ÿå ÿßŸÑÿØŸÅÿßÿπ ÿπŸÜ ÿßŸÑŸÜŸÅÿ≥ÿå ŸàÿπŸÑŸÖ ÿßŸÑÿ™ÿ¥ÿ±Ÿäÿ≠ (ŸÖÿπÿ™ŸÖÿØ ŸÖŸÜ ÿßŸÑŸÖÿ∫ÿ±ÿ®)<br>ÿ¥ŸàÿßŸáÿØ ŸÅŸä ÿßŸÑÿ•ÿ≥ÿπÿßŸÅÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸäÿ©ÿå ÿßŸÑÿµÿ≠ÿ© ÿßŸÑÿπÿßŸÖÿ©ÿå ŸàŸÅŸÜŸàŸÜ ÿßŸÑŸÇÿ™ÿßŸÑ",
                userDataTitle: "ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ©",
                nameLabel: "ÿßŸÑÿßÿ≥ŸÖ",
                ageLabel: "ÿßŸÑÿπŸÖÿ±",
                weightLabel: "ÿßŸÑŸàÿ≤ŸÜ (ŸÉÿ∫)",
                heightLabel: "ÿßŸÑÿ∑ŸàŸÑ (ÿ≥ŸÖ)",
                bloodTypeLabel: "ŸÅÿµŸäŸÑÿ© ÿßŸÑÿØŸÖ",
                fitnessLevelLabel: "ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑŸÑŸäÿßŸÇÿ©",
                sportInterestLabel: "ÿßŸÑÿ±Ÿäÿßÿ∂ÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©",
                martialArtLabel: "ŸÅŸÜŸàŸÜ ÿßŸÑŸÇÿ™ÿßŸÑ (ÿ•ŸÜ Ÿàÿ¨ÿØ)",
                injuryLabel: "ŸáŸÑ ŸÑÿØŸäŸÉ ÿ•ÿµÿßÿ®ÿ©ÿü",
                absenceDaysLabel: "ÿπÿØÿØ ÿ£ŸäÿßŸÖ ÿßŸÑÿ∫Ÿäÿßÿ® ÿßŸÑŸÖÿ™ŸàŸÇÿπÿ©",
                goalsLabel: "ÿ£ŸáÿØÿßŸÅŸÉ",
                saveBtn: "ÿ≠ŸÅÿ∏ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ üíæ",
                statsTitle: "ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ŸÉ",
                bmiLabel: "ŸÖÿ§ÿ¥ÿ± ŸÉÿ™ŸÑÿ© ÿßŸÑÿ¨ÿ≥ŸÖ",
                workoutsLabel: "ÿ™ŸÖÿßÿ±ŸäŸÜ ŸÖŸÉÿ™ŸÖŸÑÿ©",
                caloriesLabel: "ÿ≥ÿπÿ±ÿ© ŸÖÿ≠ÿ±ŸàŸÇÿ©",
                streakLabel: "ÿ£ŸäÿßŸÖ ŸÖÿ™ÿ™ÿßŸÑŸäÿ©",
                weeklyProgressLabel: "ÿßŸÑÿ™ŸÇÿØŸÖ ÿßŸÑÿ£ÿ≥ÿ®ŸàÿπŸä",
                generatePlanBtn: "ÿ•ŸÜÿ¥ÿßÿ° ÿÆÿ∑ÿ© ÿ™ŸÖÿ±ŸäŸÜ üéØ",
                bodyProjectionTitle: "üìà ÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿ¨ÿ≥ŸÖŸÉ ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ©",
                chatTitle: "ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ© ŸÖÿπ ÿßŸÑŸÖÿØÿ±ÿ® ÿßŸÑÿ∞ŸÉŸä",
                welcomeMsg: "ŸÖÿ±ÿ≠ÿ®ÿßŸã! ÿ£ŸÜÿß ŸÖÿØÿ±ÿ®ŸÉ ÿßŸÑÿ∞ŸÉŸäÿå ÿ®ÿØÿπŸÖ ŸÖŸÜ ÿÆÿ®ÿ±ÿ© <strong>ÿ≠ŸÖÿ≤ÿ© ÿßŸÑŸàÿ≠ÿØÿßŸÜŸä</strong> ŸÉÿÆÿ®Ÿäÿ± ŸÑŸäÿßŸÇÿ© Ÿàÿ™ÿ∫ÿ∞Ÿäÿ© ÿ±Ÿäÿßÿ∂Ÿäÿ©.<br>ÿ£ÿÆÿ®ÿ±ŸÜŸä: ŸÖÿß ŸáÿØŸÅŸÉÿü ŸáŸÑ ŸÑÿØŸäŸÉ ÿ•ÿµÿßÿ®ÿ©ÿü ŸÖÿß ŸÜŸàÿπ ÿ±Ÿäÿßÿ∂ÿ™ŸÉÿü",
                thinkingText: "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ŸÅŸÉŸäÿ±",
                sendBtn: "ÿ•ÿ±ÿ≥ÿßŸÑ üöÄ",
                exportPdfBtn: "ÿ™ÿµÿØŸäÿ± ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ŸÉŸÄ PDF",
                langSwitch: "Fran√ßais"
            },
            fr: {
                title: "Coach Intelligent - Hamza Al Wahdani",
                subtitle: "Plateforme intelligente int√©gr√©e pour la sant√©, la forme et la nutrition sportive",
                trainerDesc: "Docteur professionnel en science de l'exercice | Ing√©nieur en intelligence artificielle | Master en condition physique et nutrition sportive<br>Expert en blessures sportives, autod√©fense, et anatomie sportive (reconnu par le Maroc)<br>Certifications en premiers secours, sant√© publique et arts martiaux",
                userDataTitle: "Vos informations personnelles",
                nameLabel: "Nom",
                ageLabel: "√Çge",
                weightLabel: "Poids (kg)",
                heightLabel: "Taille (cm)",
                bloodTypeLabel: "Groupe sanguin",
                fitnessLevelLabel: "Niveau de forme",
                sportInterestLabel: "Sport pr√©f√©r√©",
                martialArtLabel: "Arts martiaux (si applicable)",
                injuryLabel: "Avez-vous une blessure ?",
                absenceDaysLabel: "Nombre de jours d'absence pr√©vus",
                goalsLabel: "Vos objectifs",
                saveBtn: "Enregistrer les donn√©es üíæ",
                statsTitle: "Vos statistiques",
                bmiLabel: "Indice de masse corporelle",
                workoutsLabel: "Entra√Ænements termin√©s",
                caloriesLabel: "Calories br√ªl√©es",
                streakLabel: "Jours cons√©cutifs",
                weeklyProgressLabel: "Progr√®s hebdomadaire",
                generatePlanBtn: "G√©n√©rer un programme d'entra√Ænement üéØ",
                bodyProjectionTitle: "üìà √âvolution future de votre corps",
                chatTitle: "Conversation avec le coach intelligent",
                welcomeMsg: "Bonjour ! Je suis votre coach intelligent, soutenu par l'expertise de <strong>Hamza Al Wahdani</strong> en condition physique et nutrition sportive.<br>Dites-moi : Quel est votre objectif ? Avez-vous une blessure ? Quel est votre sport ?",
                thinkingText: "Je r√©fl√©chis",
                sendBtn: "Envoyer üöÄ",
                exportPdfBtn: "Exporter le rapport en PDF",
                langSwitch: "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©"
            }
        };

        let currentLang = 'ar';

        function switchLanguage() {
            currentLang = currentLang === 'ar' ? 'fr' : 'ar';
            localStorage.setItem('fitnessLang', currentLang);
            localizeUI();
        }

        function localizeUI() {
            const t = translations[currentLang];
            document.getElementById('langSwitch').textContent = t.langSwitch;
            document.title = t.title;
            document.getElementById('title').textContent = t.title;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('trainer-desc').innerHTML = t.trainerDesc;
            document.getElementById('userDataTitle').textContent = t.userDataTitle;
            document.getElementById('nameLabel').textContent = t.nameLabel;
            document.getElementById('ageLabel').textContent = t.ageLabel;
            document.getElementById('weightLabel').textContent = t.weightLabel;
            document.getElementById('heightLabel').textContent = t.heightLabel;
            document.getElementById('bloodTypeLabel').textContent = t.bloodTypeLabel;
            document.getElementById('fitnessLevelLabel').textContent = t.fitnessLevelLabel;
            document.getElementById('sportInterestLabel').textContent = t.sportInterestLabel;
            document.getElementById('martialArtLabel').textContent = t.martialArtLabel;
            document.getElementById('injuryLabel').textContent = t.injuryLabel;
            document.getElementById('absenceDaysLabel').textContent = t.absenceDaysLabel;
            document.getElementById('goalsLabel').textContent = t.goalsLabel;
            document.getElementById('saveBtn').textContent = t.saveBtn;
            document.getElementById('statsTitle').textContent = t.statsTitle;
            document.getElementById('bmiLabel').textContent = t.bmiLabel;
            document.getElementById('workoutsLabel').textContent = t.workoutsLabel;
            document.getElementById('caloriesLabel').textContent = t.caloriesLabel;
            document.getElementById('streakLabel').textContent = t.streakLabel;
            document.getElementById('weeklyProgressLabel').textContent = t.weeklyProgressLabel;
            document.getElementById('generatePlanBtn').textContent = t.generatePlanBtn;
            document.getElementById('bodyProjectionTitle').textContent = t.bodyProjectionTitle;
            document.getElementById('chatTitle').textContent = t.chatTitle;
            document.querySelector('#chat-messages .bot-message').innerHTML = t.welcomeMsg;
            document.getElementById('thinkingText').textContent = t.thinkingText;
            document.getElementById('sendBtn').textContent = t.sendBtn;
            document.getElementById('exportPdfBtn').textContent = t.exportPdfBtn;
        }

        // ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
        let userData = {};
        let workoutCount = 0;
        let totalCalories = 0;
        let streakDays = 0;

        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿµŸÅÿ≠ÿ©
        document.addEventListener('DOMContentLoaded', function() {
            const savedLang = localStorage.getItem('fitnessLang');
            if (savedLang && (savedLang === 'ar' || savedLang === 'fr')) {
                currentLang = savedLang;
            }
            localizeUI();
            loadUserData();
            updateStats();
            document.getElementById('user-form').addEventListener('submit', saveUserData);
            document.getElementById('chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendMessage();
            });
            document.getElementById('langSwitch').addEventListener('click', switchLanguage);
        });

        // ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
        function saveUserData(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            userData = {
                name: formData.get('name'),
                age: parseInt(formData.get('age')),
                weight: parseFloat(formData.get('weight')),
                height: parseInt(formData.get('height')),
                bloodType: formData.get('bloodType'),
                fitness_level: formData.get('fitness-level'),
                sportInterest: formData.get('sportInterest'),
                martialArt: formData.get('martialArt'),
                injury: formData.get('injury'),
                absenceDays: parseInt(formData.get('absenceDays')) || 0,
                goals: formData.get('goals').split('ÿå').map(g => g.trim()),
            };
            localStorage.setItem('fitnessUserData', JSON.stringify(userData));
            updateStats();
            addMessage(`ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! ÿ£ŸÜÿ™ ÿßŸÑÿ¢ŸÜ ÿ™ÿ≠ÿ™ ÿ±ÿπÿßŸäÿ© ${userData.name}`, 'bot');
        }

        // ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
        function loadUserData() {
            const saved = localStorage.getItem('fitnessUserData');
            if (saved) {
                userData = JSON.parse(saved);
                Object.keys(userData).forEach(key => {
                    if (document.getElementById(key)) {
                        document.getElementById(key).value = userData[key];
                    }
                });
            }
            const stats = localStorage.getItem('fitnessStats');
            if (stats) {
                const savedStats = JSON.parse(stats);
                workoutCount = savedStats.workoutCount || 0;
                totalCalories = savedStats.totalCalories || 0;
                streakDays = savedStats.streakDays || 0;
            }
        }

        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
        function updateStats() {
            if (userData.weight && userData.height) {
                const heightM = userData.height / 100;
                const bmi = (userData.weight / (heightM * heightM)).toFixed(1);
                document.getElementById('bmi-value').textContent = bmi;
            }
            document.getElementById('workouts-count').textContent = workoutCount;
            document.getElementById('calories-burned').textContent = totalCalories;
            document.getElementById('streak-days').textContent = streakDays;
            const weeklyProgress = Math.min(100, (workoutCount % 5) * 20);
            document.getElementById('weekly-progress').style.width = weeklyProgress + '%';
            document.getElementById('progress-text').textContent = `${weeklyProgress}% ŸÖŸÜ ŸáÿØŸÅ ÿßŸÑÿ£ÿ≥ÿ®Ÿàÿπ`;
            localStorage.setItem('fitnessStats', JSON.stringify({ workoutCount, totalCalories, streakDays }));
        }

        // ÿ•ÿ∂ÿßŸÅÿ© ÿ±ÿ≥ÿßŸÑÿ©
        function addMessage(message, sender) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.innerHTML = message;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ©
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (!message) return;
            addMessage(message, 'user');
            input.value = '';
            document.getElementById('loading').style.display = 'block';
            setTimeout(() => {
                const response = generateResponse(message);
                addMessage(response, 'bot');
                document.getElementById('loading').style.display = 'none';
            }, 2000);
        }

        // ÿ™ŸàŸÑŸäÿØ ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ©
        function generateResponse(message) {
            const lowerMessage = message.toLowerCase();
            if (!userData.name) return 'Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿ£ŸàŸÑÿßŸã!';

            if (lowerMessage.includes('ÿÆÿ∑ÿ© ÿ™ŸÖÿ±ŸäŸÜ') || lowerMessage.includes('ÿ™ŸÖÿ±ŸäŸÜ')) {
                return generateWorkoutResponse();
            } else if (lowerMessage.includes('ÿ∫ÿ∞ÿßÿ°') || lowerMessage.includes('ÿ∑ÿπÿßŸÖ') || lowerMessage.includes('ŸÜÿ∏ÿßŸÖ ÿ∫ÿ∞ÿßÿ¶Ÿä')) {
                return generateNutritionResponse();
            } else if (lowerMessage.includes('ÿ•ŸäŸÇÿßŸÅ') || lowerMessage.includes('ÿ™ŸàŸÇŸÅ') || lowerMessage.includes('ÿ∫Ÿäÿßÿ®')) {
                return predictDeconditioning();
            } else if (lowerMessage.includes('ÿ¨ÿ≥ŸÖ') || lowerMessage.includes('ÿ¥ŸÉŸÑ') || lowerMessage.includes('ŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸä')) {
                return showBodyProjection();
            } else if (lowerMessage.includes('ŸÅÿµŸäŸÑÿ©') || lowerMessage.includes('ÿØŸÖ')) {
                return bloodTypeAdvice();
            } else if (lowerMessage.includes('ÿØŸÅÿßÿπ') || lowerMessage.includes('ŸÇÿ™ÿßŸÑ')) {
                return martialArtAdvice();
            } else if (lowerMessage.includes('ÿ£ŸÅÿ∂ŸÑ ÿ™ŸÖÿ±ŸäŸÜ') || lowerMessage.includes('ÿ®ŸÜÿßÿ° ÿπÿ∂ŸÑÿßÿ™')) {
                return generateBestExerciseResponse();
            } else if (lowerMessage.includes('ÿ£ŸÅÿ∂ŸÑ ŸÜÿ∏ÿßŸÖ ÿ∫ÿ∞ÿßÿ¶Ÿä') || lowerMessage.includes('ŸÅŸÇÿØÿßŸÜ ÿßŸÑŸàÿ≤ŸÜ')) {
                return generateWeightLossNutritionResponse();
            } else {
                return `ŸÖÿ±ÿ≠ÿ®ÿßŸã ${userData.name}! ÿ£ŸÜÿß ŸáŸÜÿß ŸÑŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ŸÅŸä ÿ±ÿ≠ŸÑÿ© ÿßŸÑŸÑŸäÿßŸÇÿ©. ÿßÿ≥ÿ£ŸÑŸÜŸä ÿπŸÜ: ÿßŸÑÿ™ŸÖÿ±ŸäŸÜÿå ÿßŸÑÿ™ÿ∫ÿ∞Ÿäÿ©ÿå ÿßŸÑÿ•ÿµÿßÿ®ÿßÿ™ÿå ÿ£Ÿà ÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿ¨ÿ≥ŸÖŸÉ.`;
            }
        }

        // ÿ™ŸàŸÇÿπÿßÿ™ ŸÅŸÇÿØÿßŸÜ ÿßŸÑÿπÿ∂ŸÑÿßÿ™
        function predictDeconditioning() {
            const days = userData.absenceDays || 0;
            if (days === 0) return "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ŸäÿßŸÖ ÿ∫Ÿäÿßÿ® ŸÖÿ≥ÿ¨ŸÑÿ©. ÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿ™ŸÖÿ±ŸäŸÜ!";
            const muscleLoss = Math.min(15, days * 0.5).toFixed(1);
            const cardioDrop = Math.min(25, days * 1.2).toFixed(1);
            return `ÿ•ÿ∞ÿß ÿ™ŸàŸÇŸÅÿ™ ÿπŸÜ ÿßŸÑÿ™ŸÖÿ±ŸäŸÜ ŸÑŸÖÿØÿ© ${days} ŸäŸàŸÖÿßŸã:<br>
                    ‚ö†Ô∏è ŸÅŸÇÿØÿßŸÜ ÿßŸÑÿπÿ∂ŸÑÿßÿ™: ${muscleLoss}%<br>
                    ‚ö†Ô∏è ÿßŸÜÿÆŸÅÿßÿ∂ ÿßŸÑŸÑŸäÿßŸÇÿ© ÿßŸÑŸÇŸÑÿ®Ÿäÿ©: ${cardioDrop}%<br>
                    üí° ŸÜÿµŸäÿ≠ÿ© ŸÖŸÜ ÿ≠ŸÖÿ≤ÿ© ÿßŸÑŸàÿ≠ÿØÿßŸÜŸä: ŸÖÿßÿ±ÿ≥ ÿ™ŸÖÿ±ŸäŸÜ ÿÆŸÅŸäŸÅ ŸÉŸÑ 3 ÿ£ŸäÿßŸÖ ŸÑŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑŸÖŸÉÿ™ÿ≥ÿ®ÿßÿ™.`;
        }

        // ÿπÿ±ÿ∂ ÿ™ŸàŸÇÿπÿßÿ™ ÿßŸÑÿ¨ÿ≥ŸÖ
        function showBodyProjection() {
            document.getElementById('body-projection').style.display = 'block';
            setTimeout(() => {
                const ctx = document.getElementById('bodyChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['ÿßŸÑÿπÿ∂ŸÑÿßÿ™', 'ÿßŸÑÿØŸáŸàŸÜ', 'ÿßŸÑŸÇŸàÿ©', 'ÿßŸÑŸÖÿ±ŸàŸÜÿ©'],
                        datasets: [{
                            label: 'ÿ≠ÿßŸÑŸäÿßŸã',
                            data: [60, 40, 50, 55],
                            backgroundColor: 'rgba(102, 126, 234, 0.6)'
                        }, {
                            label: 'ÿ®ÿπÿØ 3 ÿ£ÿ¥Ÿáÿ±',
                            data: [75, 25, 70, 75],
                            backgroundColor: 'rgba(240, 147, 251, 0.6)'
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            title: {
                                text: 'ÿ™ŸàŸÇÿπÿßÿ™ ÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿ¨ÿ≥ŸÖŸÉ'
                            }
                        }
                    }
                });
            }, 100);
            return "Ÿáÿ∞Ÿá ÿ™ŸàŸÇÿπÿßÿ™ ŸÑÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿ¨ÿ≥ŸÖŸÉ ÿÆŸÑÿßŸÑ 3 ÿ£ÿ¥Ÿáÿ± ÿ•ÿ∞ÿß ŸàÿßÿµŸÑÿ™ Ÿáÿ∞ÿß ÿßŸÑÿ®ÿ±ŸÜÿßŸÖÿ¨:";
        }

        // ŸÜÿµÿßÿ¶ÿ≠ ÿ≠ÿ≥ÿ® ŸÅÿµŸäŸÑÿ© ÿßŸÑÿØŸÖ
        function bloodTypeAdvice() {
            let advice = "";
            if (userData.bloodType.startsWith('A')) {
                advice = "ŸÜÿµŸäÿ≠ÿ©: ÿ™ŸÜÿßŸàŸÑ ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿÆÿ∂ÿ±Ÿàÿßÿ™ÿå ŸÇŸÑŸÑ ÿßŸÑŸÑÿ≠ŸàŸÖ ÿßŸÑÿ≠ŸÖÿ±ÿßÿ°.";
            } else if (userData.bloodType === 'O-') {
                advice = "ŸÜÿµŸäÿ≠ÿ©: ÿßÿ≥ÿ™ŸÅÿØ ŸÖŸÜ ÿßŸÑÿ®ÿ±Ÿàÿ™ŸäŸÜ ÿßŸÑÿ≠ŸäŸàÿßŸÜŸä ŸàÿßŸÑÿ™ŸÖÿßÿ±ŸäŸÜ ÿßŸÑÿ¥ÿØŸäÿØÿ©.";
            } else if (userData.bloodType.includes('B')) {
                advice = "ŸÜÿµŸäÿ≠ÿ©: ŸÖÿßÿ±ÿ≥ ÿ™ŸÖÿßÿ±ŸäŸÜ ÿßŸÑÿ™Ÿàÿßÿ≤ŸÜ ŸàÿßŸÑŸäŸàÿ¨ÿß.";
            } else {
                advice = "ŸÜÿµŸäÿ≠ÿ©: ÿßŸáÿ™ŸÖ ÿ®ÿßŸÑÿ™Ÿàÿßÿ≤ŸÜ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿä Ÿàÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ•ÿ¨ŸáÿßÿØ.";
            }
            return `ŸÅÿµŸäŸÑÿ© ÿØŸÖŸÉ: <strong>${userData.bloodType}</strong><br>${advice}`;
        }

        // ŸÜÿµÿßÿ¶ÿ≠ ÿ≠ÿ≥ÿ® ŸÅŸÜŸàŸÜ ÿßŸÑŸÇÿ™ÿßŸÑ
        function martialArtAdvice() {
            if (!userData.martialArt) return "ÿ£ÿÆÿ®ÿ±ŸÜŸä ÿ®ŸÅŸÜ ÿßŸÑŸÇÿ™ÿßŸÑ ÿßŸÑÿ∞Ÿä ÿ™ŸÖÿßÿ±ÿ≥Ÿá ŸÑÿ£ŸÇÿØŸÖ ŸÑŸÉ ŸÜÿµÿßÿ¶ÿ≠ ŸÖÿÆÿµÿµÿ©.";
            return `ÿ®ŸÖÿß ÿ£ŸÜŸÉ ÿ™ŸÖÿßÿ±ÿ≥ <strong>${userData.martialArt}</strong>ÿå ÿ£ŸÜÿµÿ≠ŸÉ ÿ®ÿ™ŸÖÿßÿ±ŸäŸÜ ÿßŸÑÿ™Ÿàÿßÿ≤ŸÜÿå ÿßŸÑÿ≥ÿ±ÿπÿ©ÿå ŸàÿßŸÑÿßŸÜŸÅÿ¨ÿßÿ±Ÿäÿ©.`;
        }

        // ÿ£ŸÅÿ∂ŸÑ ÿ™ŸÖÿ±ŸäŸÜ ŸÑÿ®ŸÜÿßÿ° ÿßŸÑÿπÿ∂ŸÑÿßÿ™
        function generateBestExerciseResponse() {
            let advice = "";
            if (userData.injury === 'back') {
                advice = "‚ö†Ô∏è ÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ±ŸÅÿπ ÿßŸÑÿ´ŸÇŸäŸÑ. ÿ±ŸÉŸëÿ≤ ÿπŸÑŸâ ÿ™ŸÖÿßÿ±ŸäŸÜ Core ŸÖÿ´ŸÑ ÿßŸÑÿ®ŸÑÿßŸÜŸÉ ŸàÿßŸÑÿ™ŸÖÿßÿ±ŸäŸÜ ÿπŸÑŸâ ÿßŸÑÿ¨ÿ≥ÿ±.";
            } else if (userData.injury === 'knee') {
                advice = "‚ö†Ô∏è ÿ™ÿ¨ŸÜÿ® ÿßŸÑŸÇÿ±ŸÅÿµÿßÿ° ÿßŸÑÿπŸÖŸäŸÇÿ©. ÿ±ŸÉŸëÿ≤ ÿπŸÑŸâ ÿ™ŸÖÿ±ŸäŸÜ ÿßŸÑÿ≥ÿßŸÇ ÿßŸÑÿÆŸÑŸÅŸäÿ© ŸàÿßŸÑÿßŸÜÿØŸÅÿßÿπ.";
            }

            return `
                <strong>ÿ£ŸÅÿ∂ŸÑ ÿ™ŸÖÿ±ŸäŸÜ ŸÑÿ®ŸÜÿßÿ° ÿßŸÑÿπÿ∂ŸÑÿßÿ™:</strong><br><br>
                ‚úÖ <strong>ÿßŸÑŸÇÿ±ŸÅÿµÿßÿ° (Squat):</strong> ŸäŸÇŸàŸä ÿßŸÑÿ£ÿ±ÿ¨ŸÑÿå ÿßŸÑŸÖÿ§ÿÆÿ±ÿ©ÿå ŸàÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿπŸÑŸàŸä ŸÖŸÜ ÿßŸÑÿ¨ÿ≥ŸÖ.<br>
                ‚úÖ <strong>ÿßŸÑÿ∂ÿ∫ÿ∑ (Push-up):</strong> ŸäŸÇŸàŸä ÿßŸÑÿµÿØÿ±ÿå ÿßŸÑŸÉÿ™ŸÅÿå ŸàÿßŸÑÿ∞ÿ±ÿßÿπŸäŸÜ.<br>
                ‚úÖ <strong>ÿßŸÑÿ®ŸÑÿßŸÜŸÉ (Plank):</strong> ŸäŸÇŸàŸä ÿßŸÑÿ®ÿ∑ŸÜ ŸàÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿπŸÑŸàŸä ŸÖŸÜ ÿßŸÑÿ¨ÿ≥ŸÖ.<br>
                ‚úÖ <strong>ÿßŸÑÿØŸäÿ®ÿ≥ (Dips):</strong> ŸäŸÇŸàŸä ÿßŸÑÿ∞ÿ±ÿßÿπŸäŸÜ ŸàÿßŸÑÿµÿØÿ±.<br><br>
                
                ${advice}<br><br>
                üí° ŸÜÿµŸäÿ≠ÿ© ŸÖŸÜ ÿ≠ŸÖÿ≤ÿ© ÿßŸÑŸàÿ≠ÿØÿßŸÜŸä:<br>
                - ÿßÿ®ÿØÿ£ ÿ®ŸÄ 3 ŸÖÿ¨ŸÖŸàÿπÿßÿ™ √ó 10 ÿ™ŸÉÿ±ÿßÿ±ÿßÿ™ ŸÑŸÉŸÑ ÿ™ŸÖÿ±ŸäŸÜ<br>
                - ÿßŸÜÿ™ÿ∏ÿ± 60 ÿ´ÿßŸÜŸäÿ© ÿ®ŸäŸÜ ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿßÿ™<br>
                - ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑŸàÿ≤ŸÜ ÿßŸÑŸÖŸÜÿßÿ≥ÿ® (ŸÑÿß ÿ™ÿ¨ŸáÿØ ŸÜŸÅÿ≥ŸÉ)
            `;
        }

        // ŸÜÿ∏ÿßŸÖ ÿ∫ÿ∞ÿßÿ¶Ÿä ŸÑŸÅŸÇÿØÿßŸÜ ÿßŸÑŸàÿ≤ŸÜ
        function generateWeightLossNutritionResponse() {
            let bloodTypeAdvice = "";
            if (userData.bloodType && userData.bloodType.startsWith('A')) {
                bloodTypeAdvice = "‚úÖ ÿ™ŸÜÿßŸàŸÑ ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿÆÿ∂ÿ±Ÿàÿßÿ™ÿå ŸÇŸÑŸÑ ÿßŸÑŸÑÿ≠ŸàŸÖ ÿßŸÑÿ≠ŸÖÿ±ÿßÿ°.";
            } else if (userData.bloodType === 'O-') {
                bloodTypeAdvice = "‚úÖ ÿßÿ≥ÿ™ŸÅÿØ ŸÖŸÜ ÿßŸÑÿ®ÿ±Ÿàÿ™ŸäŸÜ ÿßŸÑÿ≠ŸäŸàÿßŸÜŸä ŸàÿßŸÑÿ™ŸÖÿßÿ±ŸäŸÜ ÿßŸÑÿ¥ÿØŸäÿØÿ©.";
            } else if (userData.bloodType.includes('B')) {
                bloodTypeAdvice = "‚úÖ ŸÖÿßÿ±ÿ≥ ÿ™ŸÖÿßÿ±ŸäŸÜ ÿßŸÑÿ™Ÿàÿßÿ≤ŸÜ ŸàÿßŸÑŸäŸàÿ¨ÿß.";
            }

            return `
                <strong>ÿ£ŸÅÿ∂ŸÑ ŸÜÿ∏ÿßŸÖ ÿ∫ÿ∞ÿßÿ¶Ÿä ŸÑŸÅŸÇÿØÿßŸÜ ÿßŸÑŸàÿ≤ŸÜ:</strong><br><br>
                üçé <strong>ÿßŸÑÿÆŸÑÿßÿµÿ©:</strong><br>
                - ÿÆŸÑŸÇ ÿπÿ¨ÿ≤ ŸÅŸä ÿßŸÑÿ≥ÿπÿ±ÿßÿ™ (300-500 ÿ≥ÿπÿ±ÿ© ŸäŸàŸÖŸäÿßŸã)<br>
                - ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ®ÿ±Ÿàÿ™ŸäŸÜ (20-30% ŸÖŸÜ ÿßŸÑÿ≥ÿπÿ±ÿßÿ™)<br>
                - ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ≥ŸÉÿ±Ÿäÿßÿ™ ÿßŸÑŸÖÿ∂ÿßŸÅÿ©<br>
                - ÿ¥ÿ±ÿ® 2-3 ŸÑÿ™ÿ± ŸÖÿßÿ° ŸäŸàŸÖŸäÿßŸã<br>
                - ÿßŸÑŸÜŸàŸÖ 7-8 ÿ≥ÿßÿπÿßÿ™<br><br>
                
                ü•ó <strong>ÿ£ŸÖÿ´ŸÑÿ© ÿπŸÑŸâ Ÿàÿ¨ÿ®ÿßÿ™:</strong><br>
                - ÿßŸÑÿ•ŸÅÿ∑ÿßÿ±: ÿ®Ÿäÿ∂ÿ© + ŸÅŸàÿßŸÉŸá + ÿ≠ŸÑŸäÿ® ŸÇŸÑŸäŸÑ ÿßŸÑÿØÿ≥ŸÖ<br>
                - ÿßŸÑÿ∫ÿØÿßÿ°: ÿØÿ¨ÿßÿ¨ ŸÖÿ¥ŸàŸä + ÿÆÿ∂ÿßÿ± + ÿ£ÿ±ÿ≤ ÿ®ŸÜŸä<br>
                - ÿßŸÑÿπÿ¥ÿßÿ°: ÿ≥ŸÖŸÉ + ÿ≥ŸÑÿ∑ÿ© + ÿ≤Ÿäÿ™ ÿ≤Ÿäÿ™ŸàŸÜ<br><br>
                
                ${bloodTypeAdvice}<br><br>
                üí° ŸÜÿµŸäÿ≠ÿ© ŸÖŸÜ ÿ≠ŸÖÿ≤ÿ© ÿßŸÑŸàÿ≠ÿØÿßŸÜŸä:<br>
                - ŸÑÿß ÿ™ŸÇŸÑŸÑ ÿßŸÑÿ≥ÿπÿ±ÿßÿ™ ÿ®ÿ¥ŸÉŸÑ ŸÖŸÅÿ±ÿ∑ (ŸÇÿØ Ÿäÿ§ÿØŸä ÿ•ŸÑŸâ ŸÅŸÇÿØÿßŸÜ ÿßŸÑÿπÿ∂ŸÑÿßÿ™)<br>
                - ÿßÿπÿ™ŸÖÿØ ÿπŸÑŸâ ÿßŸÑÿ∑ÿπÿßŸÖ ÿßŸÑÿ∑ÿ®ŸäÿπŸäÿå ÿ™ÿ¨ŸÜŸëÿ® ÿßŸÑÿ£ÿ∑ÿπŸÖÿ© ÿßŸÑŸÖÿµŸÜÿπÿ©<br>
                - ÿ±ŸÉŸëÿ≤ ÿπŸÑŸâ ÿßŸÑÿ™ŸÇÿØŸÖÿå ŸÑŸäÿ≥ ÿπŸÑŸâ ÿßŸÑÿ±ŸÇŸÖ ÿπŸÑŸâ ÿßŸÑŸÖŸäÿ≤ÿßŸÜ
            `;
        }

        // ÿ™ŸÖÿ±ŸäŸÜ ŸÖŸÜÿßÿ≥ÿ®
        function generateWorkoutResponse() {
            let injuryAdvice = "";
            if (userData.injury === 'back') {
                injuryAdvice = "‚ö†Ô∏è ÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ±ŸÅÿπ ÿßŸÑÿ´ŸÇŸäŸÑ. ÿ±ŸÉŸëÿ≤ ÿπŸÑŸâ ÿ™ŸÖÿßÿ±ŸäŸÜ Core Ÿàÿ´ÿ®ÿßÿ™ ÿßŸÑÿπŸÖŸàÿØ ÿßŸÑŸÅŸÇÿ±Ÿä.";
            } else if (userData.injury === 'knee') {
                injuryAdvice = "‚ö†Ô∏è ÿ™ÿ¨ŸÜÿ® ÿßŸÑŸÇŸÅÿ≤ ŸàÿßŸÑŸÇÿ±ŸÅÿµÿßÿ° ÿßŸÑÿπŸÖŸäŸÇÿ©. ÿ±ŸÉŸëÿ≤ ÿπŸÑŸâ ÿ™ŸÇŸàŸäÿ© ÿßŸÑÿπÿ∂ŸÑÿßÿ™ ÿßŸÑŸÖÿ≠Ÿäÿ∑ÿ© ÿ®ÿßŸÑÿ±ŸÉÿ®ÿ©.";
            }

            return `ÿ™ŸÖÿ±ŸäŸÜ ŸÖŸÜÿßÿ≥ÿ® ŸÑŸÉ Ÿäÿß ${userData.name}! üí™<br><br>
                    <strong>ŸÜŸàÿπ ÿßŸÑÿ™ŸÖÿ±ŸäŸÜ:</strong> ÿ™ŸÖÿßÿ±ŸäŸÜ ŸÖŸÜÿßÿ≥ÿ®ÿ© ŸÑÿ±Ÿäÿßÿ∂ÿ™ŸÉ (${userData.sportInterest || 'ÿ∫Ÿäÿ± ŸÖÿ≠ÿØÿØ'})<br>
                    ${injuryAdvice}<br>
                    <strong>ŸÜÿµÿßÿ¶ÿ≠:</strong><br>
                    ‚úÖ ÿßÿ®ÿØÿ£ ÿ®ÿßŸÑÿ•ÿ≠ŸÖÿßÿ°<br>
                    ‚úÖ ÿßÿ≥ÿ™ŸÖÿπ ŸÑÿ¨ÿ≥ŸÖŸÉ<br>
                    ‚úÖ ÿßÿ¥ÿ±ÿ® ÿßŸÑŸÖÿßÿ°<br><br>
                    ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ™ŸÅÿßÿµŸäŸÑ ÿ£ŸÉÿ´ÿ±ÿü`;
        }

        // ŸÜÿµÿßÿ¶ÿ≠ ÿ∫ÿ∞ÿßÿ¶Ÿäÿ©
        function generateNutritionResponse() {
            return `ŸÜÿµÿßÿ¶ÿ≠ ÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ŸÖÿÆÿµÿµÿ© ŸÑŸÉ Ÿäÿß ${userData.name}! ü•ó<br><br>
                    <strong>ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ŸÅÿµŸäŸÑÿ© ÿØŸÖŸÉ (${userData.bloodType})</strong>:<br>
                    ‚úÖ ÿ±ŸÉŸëÿ≤ ÿπŸÑŸâ ÿßŸÑÿ®ÿ±Ÿàÿ™ŸäŸÜÿßÿ™ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ©<br>
                    ‚úÖ ÿßŸáÿ™ŸÖ ÿ®ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿ≠ÿØŸäÿØ<br>
                    ‚úÖ ÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ£ÿ∑ÿπŸÖÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ≥ÿ®ÿ® ÿßŸÑÿ™Ÿáÿßÿ®ÿßÿ™ ŸÑŸÅÿµŸäŸÑÿ™ŸÉ<br><br>
                    ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿÆÿ∑ÿ© ÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ÿ£ÿ≥ÿ®ŸàÿπŸäÿ©ÿü`;
        }

        // ÿ•ŸÜÿ¥ÿßÿ° ÿÆÿ∑ÿ© ÿ™ŸÖÿ±ŸäŸÜ
        function generateWorkoutPlan() {
            if (!userData.name) {
                alert('Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ®ŸäÿßŸÜÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿ£ŸàŸÑÿßŸã!');
                return;
            }
            const workoutPlanDiv = document.getElementById('workout-plan-display');
            const plan = {
                title: 'ÿÆÿ∑ÿ© ŸÖÿÆÿµÿµÿ©',
                days: [
                    { day: 'ÿßŸÑÿßÿ´ŸÜŸäŸÜ', type: 'ŸÉÿßÿ±ÿØŸäŸà', duration: '30 ÿØŸÇŸäŸÇÿ©', exercises: ['ÿ•ÿ≠ŸÖÿßÿ°', 'ÿ™ŸÖÿßÿ±ŸäŸÜ', 'ÿ™ÿ®ÿ±ŸäÿØ'] }
                ]
            };
            let planHTML = `<h3>üìã ${plan.title}</h3>`;
            plan.days.forEach(day => {
                planHTML += `<div class="exercise-item"><h4>üìÖ ${day.day}</h4><p><strong>ÿßŸÑŸÖÿØÿ©:</strong> ${day.duration}</p></div>`;
            });
            workoutPlanDiv.innerHTML = planHTML;
            workoutPlanDiv.style.display = 'block';
            addMessage('ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿÆÿ∑ÿ© ÿ™ŸÖÿ±ŸäŸÜ ŸÖÿÆÿµÿµÿ© ŸÑŸÉ! üéØ', 'bot');
        }

        // ÿ™ÿµÿØŸäÿ± PDF (ŸÇŸäÿØ ÿßŸÑÿ™ÿ∑ŸàŸäÿ±)
        function exportPDF() {
            alert("ŸÖŸäÿ≤ÿ© ÿ™ÿµÿØŸäÿ± PDF ŸÇŸäÿØ ÿßŸÑÿ™ÿ∑ŸàŸäÿ±. ÿ≥ÿ™Ÿèÿ∂ÿßŸÅ ŸÇÿ±Ÿäÿ®ÿßŸã ŸÅŸä ÿßŸÑÿ•ÿµÿØÿßÿ± ÿßŸÑŸÉÿßŸÖŸÑ ŸÑŸÑŸÖŸÜÿµÿ©.");
        }

        // ÿ£ÿ≤ÿ±ÿßÿ± ÿ≥ÿ±Ÿäÿπÿ©
        function addQuickActions() {
            const quickHTML = `
                <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn" style="flex:1" onclick="predictDeconditioning()">‚ùì ŸÖÿßÿ∞ÿß ŸÑŸà ÿ™ŸàŸÇŸÅÿ™ÿü</button>
                    <button class="btn" style="flex:1" onclick="showBodyProjection()">üìä ÿ¨ÿ≥ŸÖŸä ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸä</button>
                    <button class="btn" style="flex:1" onclick="bloodTypeAdvice()">ü©∏ ŸÅÿµŸäŸÑÿ© ÿßŸÑÿØŸÖ</button>
                </div>`;
            document.querySelector('.chat-container').insertAdjacentHTML('beforeend', quickHTML);
        }
        setTimeout(addQuickActions, 1000);
    </script>
</body>
</html>
